/*!
 * jSmart JavaScript template engine (v3.0.3)
 * https://github.com/umakantp/jsmart
 * https://opensource.org/licenses/MIT
 *
 * Copyright 2011-2017, Umakant Patil <me at umakantpatil dot com>
 *                      Max Miroshnikov <miroshnikov at gmail dot com>
 */

!function(e){"use strict";"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=e():("object"==typeof window&&window.document&&(window.jSmart=e()),"function"==typeof define&&define.amd&&define("jSmart",[],e))}(function(){"use strict";function objectMerge(e,t){for(var r=1;r<arguments.length;++r)for(var a in arguments[r])e[a]=arguments[r][a];return e}function evalString(e){return e.replace(/\\t/,"\t").replace(/\\n/,"\n").replace(/\\(['"\\])/g,"$1")}function trimAllQuotes(e){return evalString(e.replace(/^['"](.*)['"]$/,"$1")).replace(/^\s+|\s+$/g,"")}function findInArray(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}var jSmartParser={files:{},ldelim:"{",rdelim:"}",autoLiteral:!0,runTimePlugins:{},plugins:{},preFilters:[],outerBlocks:{},blocks:{},getTemplate:function(e){throw new Error("no getTemplate function defined.")},getConfig:function(){throw new Error("no getConfig function defined.")},clear:function(){this.runTimePlugins={},this.preFilters=[],this.autoLiteral=!0,this.plugins={},this.ldelim="{",this.rdelim="}",this.blocks={},this.outerBlocks={}},getTree:function(e){var t;if(e=(e=this.removeComments(e)).replace(/\r\n/g,"\n"),e=this.applyFilters(this.preFilters,e),(t=this.parse(e)).usedExtends>0){for(var r=[],a=0;a<t.length;a++)a<t.usedExtends?r.push(t[a]):"build-in"===t[a].type&&"block"===t[a].name&&r.push(t[a]);t=r}return t},getParsed:function(e){var t,r=this.getTree(e);t=this.runTimePlugins;var a=this.blocks,n=this.outerBlocks;return this.clear(),{tree:r,runTimePlugins:t,blocks:a,outerBlocks:n}},parse:function(e){var t,r,a,n,s,i,o=[],l=0;for(t=this.findTag("",e);t;t=this.findTag("",e))if(t.index&&(o=o.concat(this.parseText(e.slice(0,t.index)))),e=e.slice(t.index+t[0].length),r=t[1].match(/^\s*(\w+)(.*)$/))if(a=r[1],n=r.length>2?r[2].replace(/^\s+|\s+$/g,""):"",a in this.buildInFunctions){var p=this.buildInFunctions[a],u=("parseParams"in p?p.parseParams.bind(this):this.parseParams.bind(this))(n);if("block"===p.type){e=e.replace(/^\n/,""),i=this.findCloseTag("/"+a,a+" +[^}]*",e);var c=p.parse.call(this,u,e.slice(0,i.index));c&&(o=o.concat(c)),e=e.slice(i.index+i[0].length)}else"extends"===a&&o.splice(0,o.length),o=o.concat(p.parse.call(this,u)),"extends"===a&&(l=o.length);e=e.replace(/^\n/,"")}else if(a in this.runTimePlugins)o=o.concat(this.parsePluginFunc(a,this.parseParams(n)));else if(a in this.plugins){var g=this.plugins[a];"block"===g.type?(i=this.findCloseTag("/"+a,a+" +[^}]*",e),o=o.concat(this.parsePluginBlock(a,this.parseParams(n),e.slice(0,i.index))),e=e.slice(i.index+i[0].length)):"function"===g.type&&(o=o.concat(this.parsePluginFunc(a,this.parseParams(n)))),"append"!==a&&"assign"!==a&&"capture"!==a&&"eval"!==a&&"include"!==a||(e=e.replace(/^\n/,""))}else s=this.buildInFunctions.expression.parse.call(this,t[1]),o.push(s);else"build-in"===(s=this.buildInFunctions.expression.parse.call(this,t[1])).expression.type&&"operator"===s.expression.name&&"="===s.expression.op&&(e=e.replace(/^\n/,"")),o.push(s);return e&&(o=o.concat(this.parseText(e))),o.usedExtends=l,o},findTag:function(e,t){var r,a,n=0,s=0,i=this.ldelim,o=this.rdelim,l=this.autoLiteral,p=e?new RegExp("^\\s*("+e+")\\s*$","i"):/^\s*(.+)\s*$/i;for(r=0;r<t.length;++r)if(t.substr(r,i.length)===i){if(l&&r+1<t.length&&t.substr(r+1,1).match(/\s/))continue;n||(t=t.slice(r),s+=parseInt(r),r=0),++n}else if(t.substr(r,o.length)===o){if(l&&r-1>=0&&t.substr(r-1,1).match(/\s/))continue;if(!--n&&(a=t.slice(i.length,r).replace(/[\r\n]/g," ").match(p)))return a.index=s,a[0]=t.slice(0,r+o.length),a;n<0&&(n=0)}return null},findElseTag:function(e,t,r,a){for(var n=0,s=this.findTag(r,a);s;s=this.findTag(r,a)){var i=this.findTag(e,a);if(!i||i.index>s.index)return s.index+=n,s;a=a.slice(i.index+i[0].length),n+=i.index+i[0].length;var o=this.findCloseTag(t,e,a);a=a.slice(o.index+o[0].length),n+=o.index+o[0].length}return null},findCloseTag:function(e,t,r){var a="",n=null,s=null,i=0;do{if(n&&(i+=n[0].length),!(n=this.findTag(e,r)))throw new Error("Unclosed "+this.ldelim+t+this.rdelim);a+=r.slice(0,n.index),i+=n.index,r=r.slice(n.index+n[0].length),(s=this.findTag(t,a))&&(a=a.slice(s.index+s[0].length))}while(s);return n.index=i,n},bundleOp:function(e,t,r){var a=t[e];if("operator"===a.name&&a.precedence===r&&!a.params.__parsed){if("binary"===a.optype)return a.params.__parsed=[t[e-1],t[e+1]],t.splice(e-1,3,a),[!0,t];if("post-unary"===a.optype)return a.params.__parsed=[t[e-1]],t.splice(e-1,2,a),[!0,t];a.params.__parsed=[t[e+1]],t.splice(e,2,a)}return[!1,t]},composeExpression:function(e){var t,r=0;for(r=0;r<e.length;++r)e[r]instanceof Array&&(e[r]=this.composeExpression(e[r]));for(var a=1;a<14;++a)if(2===a||10===a)for(r=e.length;r>0;--r)r-=(t=this.bundleOp(r-1,e,a))[0],e=t[1];else for(r=0;r<e.length;++r)r-=(t=this.bundleOp(r,e,a))[0],e=t[1];return e[0]},getMatchingToken:function(e){for(var t=0;t<this.tokens.length;++t)if(e.match(this.tokens[t].regex))return t;return!1},parseVar:function(e,t,r){var a,n,s=/^(?:\.|\s*->\s*|\[\s*)/,i={value:"",tree:[]},o=[{type:"text",data:t.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi,"$1__$2")}],l=r;for(r||(l=r=t),a=e.match(s);a;a=e.match(s)){if(r+=a[0],e=e.slice(a[0].length),a[0].match(/\[/)){(i=this.parseExpression(e,!0)).tree&&(r+=i.value,o.push(i.tree),e=e.slice(i.value.length));var p=e.match(/\s*\]/);p&&(r+=p[0],e=e.slice(p[0].length))}else{var u=this.parseModifiersStop;if(this.parseModifiersStop=!0,n=this.lookUp(e,""))if(i.tree=[].concat(i.tree,n.tree),i.value=n.value,r+=n.value,n.ret){var c=i.tree[i.tree.length-1];"plugin"===c.type&&"__func"===c.name&&(c.hasOwner=!0),o.push(c),e=e.slice(i.value.length)}else i=!1;this.parseModifiersStop=u}i||o.push({type:"text",data:""})}return{s:e,token:r,tree:[{type:"var",parts:o}],value:r.substr(l.length)}},parseFunc:function(e,t,r){return t.__parsed.name=this.parseText(e,[])[0],r.push({type:"plugin",name:"__func",params:t}),r},parseOperator:function(e,t,r){return[{type:"build-in",name:"operator",op:e,optype:t,precedence:r,params:{}}]},parsePluginBlock:function(e,t,r){return[{type:"plugin",name:e,params:t,subTree:this.parse(r,[])}]},parsePluginFunc:function(e,t){return[{type:"plugin",name:e,params:t}]},parseModifiers:function(e,t){var r,a=e.match(/^\|(\w+)/),n="";if(!this.parseModifiersStop&&a){n+=a[0],r="default"===a[1]?"defaultValue":a[1],e=e.slice(a[0].length).replace(/^\s+/,""),this.parseModifiersStop=!0;for(var s=[],i=e.match(/^\s*:\s*/);i;i=e.match(/^\s*:\s*/)){n+=e.slice(0,i[0].length),e=e.slice(i[0].length);var o=this.lookUp(e,"");o.ret?(n+=o.value,s.push(o.tree[0]),e=e.slice(o.value.length)):s.push(this.parseText(""))}this.parseModifiersStop=!1,s.unshift(t.pop());var l=this.parseFunc(r,{__parsed:s},[]);t.push(l[0]);var p=this.parseModifiers(e,t);return p&&(t=t.concat(p.tree)),{value:n,tree:t}}},parseParams:function(e,t,r){var a=e.replace(/\n/g," ").replace(/^\s+|\s+$/g,""),n=[];if(e="",n.__parsed=[],!a)return n;for(t||(t=/^\s+/,r=/^(\w+)\s*=\s*/);a;){var s=null;if(r){var i=a.match(r);if(i){var o=i[1].charAt(0).match(/^\d+/);"true"!==i[1]&&"false"!==i[1]&&"null"!==i[1]||(o=!0),o||(s=trimAllQuotes(i[1]),e+=a.slice(0,i[0].length),a=a.slice(i[0].length))}}var l=this.parseExpression(a);if(!l)break;s?(n[s]=l.value,n.__parsed[s]=l.tree):(n.push(l.value),n.__parsed.push(l.tree)),e+=a.slice(0,l.value.length);var p=(a=a.slice(l.value.length)).match(t);if(!p)break;e+=a.slice(0,p[0].length),a=a.slice(p[0].length)}return n.toString=function(){return e},n},lookUp:function(e,t){var r,a=[];if(!e)return!1;if(e.substr(0,this.ldelim.length)===this.ldelim&&(t+=(r=this.findTag("",e))[0],r)){var n=this.parse(r[0]);a=a.concat(n);var s=this.parseModifiers(e.slice(t.length),a);return s?{ret:!0,tree:s.tree,value:s.value}:{ret:!0,tree:a,value:t}}var i=this.getMatchingToken(e);if(!1!==i){t+=RegExp.lastMatch;var o=this.tokens[i].parse.call(this,e.slice(RegExp.lastMatch.length),{tree:a,token:RegExp.lastMatch});if("string"==typeof o)if("parenStart"===o){var l=[];a.push(l),l.parent=a,a=l}else"parenEnd"===o&&a.parent&&(a=a.parent);else o&&o.constructor===Object?(t+=o.value,o=o.tree,a=a.concat(o)):a=a.concat(o);return{ret:!0,tree:a,value:t}}return{ret:!1,tree:a,value:t}},parseExpression:function(e){var t,r=[],a="";for(this.lastTreeInExpression=r;(t=this.lookUp(e.slice(a.length),a))&&(r=r.concat(t.tree),a=t.value,this.lastTreeInExpression=r,t.ret););return r.length&&(r=this.composeExpression(r)),{tree:r,value:a}},parseBool:function(e){return[{type:"boolean",data:e}]},parseText:function(e){var t=[];if(this.parseEmbeddedVars)for(var r=/([$][\w@]+)|`([^`]*)`/,a=r.exec(e);a;a=r.exec(e)){t.push({type:"text",data:e.slice(0,a.index)});var n=this.parseExpression(a[1]?a[1]:a[2]);t.push(n.tree),e=e.slice(a.index+a[0].length)}return t.push({type:"text",data:e}),t},loadTemplate:function(e,t){var r=[];if(!t&&e in this.files)r=this.files[e];else{var a=this.getTemplate(e);if("string"!=typeof a)throw new Error("No template for "+e);r=this.getTree(a),this.files[e]=r}return r},removeComments:function(e){for(var t=new RegExp(this.ldelim+"\\*"),r=new RegExp("\\*"+this.rdelim),a="",n=e.match(t);n;n=e.match(t)){a+=e.slice(0,n.index);var s=(e=e.slice(n.index+n[0].length)).match(r);if(!s)throw new Error("Unclosed "+t+"*");e=e.slice(s.index+s[0].length)}return a+e},applyFilters:function(e,t){for(var r=0;r<e.length;++r)t=e[r](t);return t},tokens:[{regex:/^\$([\w@]+)/,parse:function(e,t){var r=this.parseVar(e,RegExp.$1,RegExp.$1),a=this.parseModifiers(r.s,r.tree);return a?(r.value+=a.value,a):r}},{regex:/^(true|false)/i,parse:function(e,t){return t.token.match(/true/i)?this.parseBool(!0):this.parseBool(!1)}},{regex:/^'([^'\\]*(?:\\.[^'\\]*)*)'/,parse:function(e,t){var r=evalString(RegExp.$1),a=this.parseText(r),n=this.parseModifiers(e,a);return n||a}},{regex:/^"([^"\\]*(?:\\.[^"\\]*)*)"/,parse:function(e,t){var r=evalString(RegExp.$1),a=r.match(this.tokens[0].regex);if(a){var n=this.parseVar(r,a[1],a[0]);if(n.token.length===r.length)return[n.tree[0]]}this.parseEmbeddedVars=!0;var s=[];s.push({type:"plugin",name:"__quoted",params:{__parsed:this.parse(r,[])}}),this.parseEmbeddedVars=!1;var i=this.parseModifiers(e,s);return i||s}},{regex:/^(\w+)\s*[(]([)]?)/,parse:function(e,t){var r=RegExp.$1,a=RegExp.$2,n=this.parseParams(a?"":e,/^\s*,\s*/),s=this.parseFunc(r,n,[]),i=this.parseModifiers(e.slice(n.toString().length),s);return i||s}},{regex:/^\s*\(\s*/,parse:function(e,t){return"parenStart"}},{regex:/^\s*\)\s*/,parse:function(e,t){return"parenEnd"}},{regex:/^\s*(\+\+|--)\s*/,parse:function(e,t){return this.lastTreeInExpression.length&&"var"===this.lastTreeInExpression[this.lastTreeInExpression.length-1].type?this.parseOperator(RegExp.$1,"post-unary",1):this.parseOperator(RegExp.$1,"pre-unary",1)}},{regex:/^\s*(===|!==|==|!=)\s*/,parse:function(e,t){return this.parseOperator(RegExp.$1,"binary",6)}},{regex:/^\s+(eq|ne|neq)\s+/i,parse:function(e,t){var r=RegExp.$1.replace(/ne(q)?/,"!=").replace(/eq/,"==");return this.parseOperator(r,"binary",6)}},{regex:/^\s*!\s*/,parse:function(e,t){return this.parseOperator("!","pre-unary",2)}},{regex:/^\s+not\s+/i,parse:function(e,t){return this.parseOperator("!","pre-unary",2)}},{regex:/^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,parse:function(e,t){return this.parseOperator(RegExp.$1,"binary",10)}},{regex:/^\s*(\*|\/|%)\s*/,parse:function(e,t){return this.parseOperator(RegExp.$1,"binary",3)}},{regex:/^\s+mod\s+/i,parse:function(e,t){return this.parseOperator("%","binary",3)}},{regex:/^\s*(\+|-)\s*/,parse:function(e,t){return this.lastTreeInExpression.length&&"operator"!==this.lastTreeInExpression[this.lastTreeInExpression.length-1].name?this.parseOperator(RegExp.$1,"binary",4):this.parseOperator(RegExp.$1,"pre-unary",4)}},{regex:/^\s*(<=|>=|<>|<|>)\s*/,parse:function(e,t){return this.parseOperator(RegExp.$1.replace(/<>/,"!="),"binary",5)}},{regex:/^\s+(lt|lte|le|gt|gte|ge)\s+/i,parse:function(e,t){var r=RegExp.$1.replace(/l(t)?e/,"<").replace(/lt/,"<=").replace(/g(t)?e/,">").replace(/gt/,">=");return this.parseOperator(r,"binary",5)}},{regex:/^\s+(is\s+(not\s+)?div\s+by)\s+/i,parse:function(e,t){return this.parseOperator(RegExp.$2?"div_not":"div","binary",7)}},{regex:/^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,parse:function(e,t){var r=RegExp.$1?"odd"===RegExp.$2?"even":"even_not":"odd"===RegExp.$2?"even_not":"even",a=this.parseOperator(r,"binary",7);return RegExp.$3?a:a.concat(this.parseText("1",a))}},{regex:/^\s*(&&)\s*/,parse:function(e,t){return this.parseOperator(RegExp.$1,"binary",8)}},{regex:/^\s*(\|\|)\s*/,parse:function(e,t){return this.parseOperator(RegExp.$1,"binary",9)}},{regex:/^\s+and\s+/i,parse:function(e,t){return this.parseOperator("&&","binary",11)}},{regex:/^\s+xor\s+/i,parse:function(e,t){return this.parseOperator("xor","binary",12)}},{regex:/^\s+or\s+/i,parse:function(e,t){return this.parseOperator("||","binary",13)}},{regex:/^#(\w+)#/,parse:function(e,t){var r=this.parseVar(".config."+RegExp.$1,"smarty","$smarty"),a=this.parseModifiers(r.s,r.tree);return a?(r.value+=a.value,a):r}},{regex:/^\s*\[\s*/,parse:function(e,t){var r=this.parseParams(e,/^\s*,\s*/,/^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/),a=this.parsePluginFunc("__array",r),n=r.toString(),s=e.slice(r.toString().length).match(/\s*\]/);return s&&(n+=s[0]),{tree:a,value:n}}},{regex:/^[\d.]+/,parse:function(e,t){t.token.indexOf(".")>-1?t.token=parseFloat(t.token):t.token=parseInt(t.token,10);var r=this.parseText(t.token),a=this.parseModifiers(e,r);return a||r}},{regex:/^\w+/,parse:function(e,t){var r=this.parseText(t.token),a=this.parseModifiers(e,r);return a||r}}],buildInFunctions:{expression:{parse:function(e){var t=this.parseExpression(e);return{type:"build-in",name:"expression",expression:t.tree,params:this.parseParams(e.slice(t.value.length).replace(/^\s+|\s+$/g,""))}}},section:{type:"block",parse:function(e,t){var r=[],a=[],n=this.findElseTag("section [^}]+","/section","sectionelse",t);return n?(r=this.parse(t.slice(0,n.index)),a=this.parse(t.slice(n.index+n[0].length).replace(/^[\r\n]/,""))):r=this.parse(t),{type:"build-in",name:"section",params:e,subTree:r,subTreeElse:a}}},setfilter:{type:"block",parseParams:function(e){return[this.parseExpression("__t()|"+e).tree]},parse:function(e,t){return{type:"build-in",name:"setfilter",params:e,subTree:this.parse(t)}}},config_load:{type:"function",parse:function(e){var t=trimAllQuotes(e.file?e.file:e[0]);return{type:"build-in",name:"config_load",params:e,content:this.getConfig(t),section:trimAllQuotes(e.section?e.section:e[1]?e[1]:"")}}},append:{type:"function",parse:function(e){return{type:"build-in",name:"append",params:e}}},assign:{type:"function",parse:function(e){return{type:"build-in",name:"assign",params:e}}},break:{type:"function",parse:function(e){return{type:"build-in",name:"break",params:e}}},continue:{type:"function",parse:function(e){return{type:"build-in",name:"continue",params:e}}},call:{type:"function",parse:function(e){return{type:"build-in",name:"call",params:e}}},capture:{type:"block",parse:function(e,t){return{type:"build-in",name:"capture",params:e,subTree:this.parse(t)}}},nocache:{type:"block",parse:function(e,t){return{type:"build-in",name:"nocache",params:e,subTree:this.parse(t)}}},eval:{type:"function",parse:function(e){return this.parsePluginFunc("eval",e)}},include:{type:"function",parse:function(e){var t=trimAllQuotes(e.file?e.file:e[0]),r=findInArray(e,"nocache")>=0;return{type:"build-in",name:"include",params:e,subTree:this.loadTemplate(t,r)}}},for:{type:"block",parseParams:function(e){var t=e.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);if(!t)throw new Error("Invalid {for} parameters: "+e);return this.parseParams("varName='"+t[1]+"' from="+t[2]+" to="+t[3]+" step="+(t[4]?t[4]:"1")+" "+t[5])},parse:function(e,t){var r=[],a=[],n=this.findElseTag("for\\s[^}]+","/for","forelse",t);return n?(r=this.parse(t.slice(0,n.index)),a=this.parse(t.slice(n.index+n[0].length))):r=this.parse(t),{type:"build-in",name:"for",params:e,subTree:r,subTreeElse:a}}},if:{type:"block",parse:function(e,t){var r=[],a=[],n=this.findElseTag("if\\s+[^}]+","/if","else[^}]*",t);if(n){r=this.parse(t.slice(0,n.index)),t=t.slice(n.index+n[0].length);var s=n[1].match(/^else\s*if(.*)/);a=s?this.buildInFunctions.if.parse.call(this,this.parseParams(s[1]),t.replace(/^\n/,"")):this.parse(t.replace(/^\n/,""))}else r=this.parse(t);return[{type:"build-in",name:"if",params:e,subTreeIf:r,subTreeElse:a}]}},foreach:{type:"block",parseParams:function(e){var t=e.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);return t&&(e="from="+t[1]+" item="+(t[4]||t[2]),t[4]&&(e+=" key="+t[2])),this.parseParams(e)},parse:function(e,t){var r=[],a=[],n=this.findElseTag("foreach\\s[^}]+","/foreach","foreachelse",t);return n?(r=this.parse(t.slice(0,n.index)),a=this.parse(t.slice(n.index+n[0].length).replace(/^[\r\n]/,""))):r=this.parse(t),{type:"build-in",name:"foreach",params:e,subTree:r,subTreeElse:a}}},function:{type:"block",parse:function(e,t){this.runTimePlugins[trimAllQuotes(e.name?e.name:e[0])]=!0;var r=this.parse(t);return this.runTimePlugins[trimAllQuotes(e.name?e.name:e[0])]={tree:r,defaultParams:e},!1}},extends:{type:"function",parse:function(e){return this.loadTemplate(trimAllQuotes(e.file?e.file:e[0]),!0)}},block:{type:"block",parse:function(e,t){var r;e.append=findInArray(e,"append")>=0,e.prepend=findInArray(e,"prepend")>=0,e.hide=findInArray(e,"hide")>=0;var a,n=this.parse(t,[]),s=trimAllQuotes(e.name?e.name:e[0]);return s in this.blocks?(this.outerBlocks[s]=[],this.outerBlocks[s]={tree:n,params:e},a="outer",r=t.match(/smarty.block.parent/),e.needParent=!1,r&&(e.needParent=!0)):(this.blocks[s]=[],this.blocks[s]={tree:n,params:e},a="inner",r=t.match(/smarty.block.child/),e.needChild=!1,r&&(e.needChild=!0)),{type:"build-in",name:"block",params:e,location:a}}},strip:{type:"block",parse:function(e,t){return this.parse(t.replace(/[ \t]*[\r\n]+[ \t]*/g,""))}},literal:{type:"block",parse:function(e,t){return this.parseText(t)}},ldelim:{type:"function",parse:function(e){return this.parseText(this.ldelim)}},rdelim:{type:"function",parse:function(e){return this.parseText(this.rdelim)}},while:{type:"block",parse:function(e,t){return{type:"build-in",name:"while",params:e,subTree:this.parse(t)}}}}};function isEmptyObject(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function countProperties(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t}var jSmartProcessor={tplModifiers:[],runTimePlugins:{},plugins:{},modifiers:{},defaultModifiers:{},escapeHtml:!1,variableFilters:[],outerBlocks:{},blocks:{},debugging:!1,clear:function(){this.runTimePlugins={},this.variableFilters=[],this.escapeHtml=!1,this.defaultModifiers={},this.modifiers={},this.plugins={},this.blocks={},this.outerBlocks={},this.debugging=!1,this.includedTemplates=[]},getProcessed:function(e,t){var r=this.process(e,t);return this.debugging&&this.plugins.debug.process([],{includedTemplates:this.includedTemplates,assignedVars:t}),this.clear(),{output:r.tpl,smarty:r.smarty}},process:function(e,t){for(var r,a,n,s,i="",o=0;o<e.length;++o){if(r="","text"===(a=e[o]).type)r=a.data;else if("var"===a.type)r=this.getVarValue(a,t);else if("boolean"===a.type)r=!!a.data;else if("build-in"===a.type)void 0!==(n=this.buildInFunctions[a.name].process.call(this,a,t)).tpl?(r=n.tpl,t=n.data):r=n;else if("plugin"===a.type)if(this.runTimePlugins[a.name])void 0!==(n=this.buildInFunctions.function.process.call(this,a,t)).tpl?(r=n.tpl,t=n.data):r=n;else if("block"===(s=this.plugins[a.name]).type)for(var l={value:!0};l.value;)l.value=!1,void 0!==(n=this.process(a.subTree,t)).tpl&&(t=n.data,n=n.tpl),r+=s.process.call(this,this.getActualParamValues(a.params,t),n,t,l);else"function"===s.type&&(r=s.process.call(this,this.getActualParamValues(a.params,t),t));if("boolean"==typeof r&&1!==e.length&&(r=r?"1":""),null!==r&&void 0!==r||(r=""),1===e.length)return{tpl:r,data:t};if(i+=null!==r?r:"",t.smarty.continue||t.smarty.break)return{tpl:i,data:t}}return{tpl:i,data:t}},configLoad:function(e,t,r){for(var a,n=e.replace(/\r\n/g,"\n").replace(/^\s+|\s+$/g,""),s=/^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m,i="",o=n.match(s);o;o=n.match(s)){n=n.slice(o.index+o[0].length),o[1]?i=o[1]:i&&i!==t||"."===i.substr(0,1)||('"""'===o[3]?(a=n.match(/"""/))&&(r.smarty.config[o[2]]=n.slice(0,a.index),n=n.slice(a.index+a[0].length)):r.smarty.config[o[2]]=trimAllQuotes(o[3]));var l=n.match(/\n+/);if(!l)break;n=n.slice(l.index+l[0].length)}return r},getActualParamValues:function(e,t){var r,a=[];for(var n in e.__parsed)e.__parsed.hasOwnProperty(n)&&(void 0!==(r=this.process([e.__parsed[n]],t))&&(t=r.data,r=r.tpl),a[n]=r);return a.__get=function(e,t,r){if(e in a&&void 0!==a[e])return a[e];if(void 0!==r&&void 0!==a[r])return a[r];if(null===t)throw new Error('The required attribute "'+e+'" is missing');return t},a},getVarValue:function(e,t,r){var a,n,s=t,i="";for(a=0;a<e.parts.length;++a)if("plugin"===(n=e.parts[a]).type&&"__func"===n.name&&n.hasOwner)t.__owner=s,void 0!==(s=this.process([e.parts[a]],t)).tpl&&(t=s.data,s=s.tpl),delete t.__owner;else{void 0!==(i=this.process([n],t))&&(t=i.data,i=i.tpl);var o=this.process([e.parts[0]],t);if(void 0!==o&&(t=o.data,o=o.tpl),i in t.smarty.section&&"text"===n.type&&"smarty"!==o&&(i=t.smarty.section[i].index),!i&&void 0!==r&&s instanceof Array&&(i=s.length),void 0!==r&&a===e.parts.length-1&&(s[i]=r),"object"==typeof s&&null!==s&&i in s)s=s[i];else{if(void 0===r)return r;s[i]={},s=s[i]}}return s},applyFilters:function(e,t){for(var r=0;r<e.length;++r)t=e[r](t);return t},assignVar:function(e,t,r){return e.match(/\[\]$/)?r[e.replace(/\[\]$/,"")].push(t):r[e]=t,r},buildInFunctions:{expression:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a=this.process([e.expression],t);if(void 0!==a&&(t=a.data,a=a.tpl),findInArray(r,"nofilter")<0){for(var n=0;n<this.defaultModifiers.length;++n){var s=this.defaultModifiers[n];s.params.__parsed[0]={type:"text",data:a},void 0!==(a=this.process([s],t))&&(t=a.data,a=a.tpl)}this.escapeHtml&&(a=this.modifiers.escape(a)),a=this.applyFilters(this.variableFilters,a),this.tplModifiers.length&&("object"==typeof window&&window.document?window.__t=function(){return a}:global.__t=function(){return a},void 0!==(a=this.process(this.tplModifiers[this.tplModifiers.length-1],t))&&(t=a.data,a=a.tpl))}return{tpl:a,data:t}}},append:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a=r.__get("var",null,0);a in t&&t[a]instanceof Array||(t[a]=[]);var n=r.__get("index",!1),s=r.__get("value",null,1);return!1===n?t[a].push(s):t[a][n]=s,{tpl:"",data:t}}},assign:{process:function(e,t){var r=this.getActualParamValues(e.params,t);return{tpl:"",data:this.assignVar(r.__get("var",null,0),r.__get("value",null,1),t)}}},config_load:{process:function(e,t){return{tpl:"",data:t=this.configLoad(e.content,e.section,t)}}},capture:{process:function(e,t){var r=this.getActualParamValues(e.params,t);e.name="cap-"+e.params.name;var a=this.process(e.subTree,t);void 0!==a&&(t=a.data,a=a.tpl),a=a.replace(/^\n/,""),t.smarty.capture[r.__get("name","default",0)]=a,"assign"in r&&(t=this.assignVar(r.assign,a,t));var n=r.__get("append",!1);return n&&(n in t?t[n]instanceof Array&&t[n].push(a):t[n]=[a]),{tpl:"",data:t}}},operator:{process:function(e,t){var r,a,n=this.getActualParamValues(e.params,t),s=n[0];if("binary"!==e.optype){if("!"===e.op)return!s;(a="var"===e.params.__parsed[0].type)&&(s=this.getVarValue(e.params.__parsed[0],t));var i=s;if("pre-unary"===e.optype){switch(e.op){case"-":i=-s;break;case"++":i=++s;break;case"--":i=--s}a&&this.getVarValue(e.params.__parsed[0],t,s)}else{switch(e.op){case"++":s++;break;case"--":s--}this.getVarValue(e.params.__parsed[0],t,s)}return i}if(r=n[1],"="===e.op)return this.getVarValue(e.params.__parsed[0],t,r),{tpl:"",data:t};if(e.op.match(/(\+=|-=|\*=|\/=|%=)/)){switch(s=this.getVarValue(e.params.__parsed[0],t),e.op){case"+=":s+=r;break;case"-=":s-=r;break;case"*=":s*=r;break;case"/=":s/=r;break;case"%=":s%=r}return this.getVarValue(e.params.__parsed[0],t,s)}if(e.op.match(/div/))return"div"!==e.op^s%r==0;if(e.op.match(/even/))return"even"!==e.op^s/r%2==0;if(e.op.match(/xor/))return(s||r)&&!(s&&r);switch(e.op){case"==":return s==r;case"!=":return s!=r;case"+":return Number(s)+Number(r);case"-":return Number(s)-Number(r);case"*":return Number(s)*Number(r);case"/":return Number(s)/Number(r);case"%":return Number(s)%Number(r);case"&&":return s&&r;case"||":return s||r;case"<":return s<r;case"<=":return s<=r;case">":return s>r;case"===":return s===r;case">=":return s>=r;case"!==":return s!==r}}},section:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a={},n=r.__get("show",!0);if(t.smarty.section[r.__get("name",null,0)]=a,a.show=n,!n)return this.process(e.subTreeElse,t);var s=parseInt(r.__get("start",0),10),i=r.loop instanceof Object?countProperties(r.loop):isNaN(r.loop)?0:parseInt(r.loop),o=parseInt(r.__get("step",1),10),l=parseInt(r.__get("max"),10);isNaN(l)&&(l=Number.MAX_VALUE),s<0?(s+=i)<0&&(s=0):s>=i&&(s=i?i-1:0);var p=0,u=s;p=0;var c="";for(u=s;u>=0&&u<i&&p<l&&!t.smarty.break;u+=o,++p){a.first=u===s,a.last=u+o<0||u+o>=i,a.index=u,a.index_prev=u-o,a.index_next=u+o,a.iteration=a.rownum=p+1,a.total=p,a.loop=p;var g=this.process(e.subTree,t);void 0!==g&&(t=g.data,c+=g.tpl),t.smarty.continue=!1}return a.total=p,a.loop=p,t.smarty.break=!1,p?{tpl:c,data:t}:this.process(e.subTreeElse,t)}},setfilter:{process:function(e,t){this.tplModifiers.push(e.params);var r=this.process(e.subTree,t);return void 0!==r&&(t=r.data,r=r.tpl),this.tplModifiers.pop(),{tpl:r,data:t}}},for:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a=parseInt(r.__get("from"),10),n=parseInt(r.__get("to"),10),s=parseInt(r.__get("step"),10);isNaN(s)&&(s=1);var i=parseInt(r.__get("max"),10);isNaN(i)&&(i=Number.MAX_VALUE);for(var o=0,l="",p=Math.min(Math.ceil((1+(s>0?n-a:a-n))/Math.abs(s)),i),u=parseInt(r.from,10);o<p&&!t.smarty.break;u+=s,++o){t[r.varName]=u;var c=this.process(e.subTree,t);void 0!==c&&(t=c.data,l+=c.tpl),t.smarty.continue=!1}if(t.smarty.break=!1,!o){var g=this.process(e.subTreeElse,t);void 0!==g&&(t=g.data,l=g.tpl)}return{tpl:l,data:t}}},if:{process:function(e,t){var r=this.getActualParamValues(e.params,t)[0];return r&&!(r instanceof Array&&0===r.length||"object"==typeof r&&isEmptyObject(r))?this.process(e.subTreeIf,t):this.process(e.subTreeElse,t)}},nocache:{process:function(e,t){return this.process(e.subTree,t)}},foreach:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a=r.from;void 0===a&&(a=[]),"object"!=typeof a&&(a=[a]);var n=countProperties(a);t[r.item+"__total"]=n,"name"in r&&(t.smarty.foreach[r.name]={},t.smarty.foreach[r.name].total=n);var s="",i=0;for(var o in a)if(a.hasOwnProperty(o)){if(t.smarty.break)break;t[r.item+"__key"]=isNaN(o)?o:parseInt(o,10),"key"in r&&(t[r.key]=t[r.item+"__key"]),t[r.item]=a[o],t[r.item+"__index"]=parseInt(i,10),t[r.item+"__iteration"]=parseInt(i+1,10),t[r.item+"__first"]=0===i,t[r.item+"__last"]=i===n-1,"name"in r&&(t.smarty.foreach[r.name].index=parseInt(i,10),t.smarty.foreach[r.name].iteration=parseInt(i+1,10),t.smarty.foreach[r.name].first=0===i?1:"",t.smarty.foreach[r.name].last=i===n-1?1:""),++i;var l=this.process(e.subTree,t);void 0!==l&&(t=l.data,s+=l.tpl),t.smarty.continue=!1}return t.smarty.break=!1,t[r.item+"__show"]=i>0,r.name&&(t.smarty.foreach[r.name].show=i>0?1:""),i>0?s:this.process(e.subTreeElse,t)}},break:{process:function(e,t){return t.smarty.break=!0,{tpl:"",data:t}}},continue:{process:function(e,t){return t.smarty.continue=!0,{tpl:"",data:t}}},block:{process:function(e,t){var r,a,n,s=trimAllQuotes(e.params.name?e.params.name:e.params[0]),i=this.blocks[s],o=this.outerBlocks[s];return"inner"===e.location?(i.params.needChild?(void 0!==(a=this.process(o.tree,t)).tpl&&(a=a.tpl),t.smarty.block.child=a,void 0!==(r=this.process(i.tree,t)).tpl&&(r=r.tpl),n=r):o.params.needParent?(void 0!==(r=this.process(i.tree,t)).tpl&&(r=r.tpl),t.smarty.block.parent=r,void 0!==(a=this.process(o.tree,t)).tpl&&(a=a.tpl),n=a):(void 0!==(a=this.process(o.tree,t)).tpl&&(a=a.tpl),o.params.append?(void 0!==(r=this.process(i.tree,t)).tpl&&(r=r.tpl),n=a+r):o.params.prepend?(void 0!==(r=this.process(i.tree,t)).tpl&&(r=r.tpl),n=r+a):n=a),n):""}},call:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a={name:r.__get("name")?r.__get("name"):r.__get("0"),params:e.params},n=this.buildInFunctions.function.process.call(this,a,t),s=r.__get("assign",!1);return s?{tpl:"",data:this.assignVar(s,n,t)}:n}},include:{process:function(e,t){var r=this.getActualParamValues(e.params,t),a=r.__get("file",null,0);this.includedTemplates.push(a);var n=objectMerge({},t,r);n.smarty.template=a;var s=this.process(e.subTree,n);return void 0!==s&&(s=s.tpl),r.assign?{tpl:"",data:this.assignVar(r.assign,s,t)}:s}},function:{process:function(e,t){var r=this.runTimePlugins[e.name],a=this.getActualParamValues(r.defaultParams,t);delete a.name;var n=this.getActualParamValues(e.params,t);return this.process(r.tree,objectMerge({},t,a,n)).tpl}},while:{process:function(e,t){for(var r="";this.getActualParamValues(e.params,t)[0]&&!t.smarty.break;){var a=this.process(e.subTree,t);void 0!==a&&(t=a.data,r+=a.tpl),t.smarty.continue=!1}return t.smarty.break=!1,{tpl:r,data:t}}}}},version="3.0.3",jSmart=function(e,t){this.smarty={block:{},break:!1,capture:{},continue:!1,counter:{},cycle:{},foreach:{},section:{},now:Math.floor((new Date).getTime()/1e3),const:{},config:{},current_dir:"/",template:"",ldelim:"{",rdelim:"}",version:version},this.autoLiteral=!0,this.escapeHtml=!1,this.debugging=!1,this.outerBlocks={},this.blocks={},this.parse(e,t)};function getHtmlTranslationTable(e,t){var r,a,n,s={},i={},o={},l={};if(o[0]="HTML_SPECIALCHARS",o[1]="HTML_ENTITIES",l[0]="ENT_NOQUOTES",l[2]="ENT_COMPAT",l[3]="ENT_QUOTES",a=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":o[e],n=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":l[t],"HTML_SPECIALCHARS"!==a&&"HTML_ENTITIES"!==a)throw new Error("Table: "+a+" not supported");s[38]="&amp;","HTML_ENTITIES"===a&&(s[160]="&nbsp;",s[161]="&iexcl;",s[162]="&cent;",s[163]="&pound;",s[164]="&curren;",s[165]="&yen;",s[166]="&brvbar;",s[167]="&sect;",s[168]="&uml;",s[169]="&copy;",s[170]="&ordf;",s[171]="&laquo;",s[172]="&not;",s[173]="&shy;",s[174]="&reg;",s[175]="&macr;",s[176]="&deg;",s[177]="&plusmn;",s[178]="&sup2;",s[179]="&sup3;",s[180]="&acute;",s[181]="&micro;",s[182]="&para;",s[183]="&middot;",s[184]="&cedil;",s[185]="&sup1;",s[186]="&ordm;",s[187]="&raquo;",s[188]="&frac14;",s[189]="&frac12;",s[190]="&frac34;",s[191]="&iquest;",s[192]="&Agrave;",s[193]="&Aacute;",s[194]="&Acirc;",s[195]="&Atilde;",s[196]="&Auml;",s[197]="&Aring;",s[198]="&AElig;",s[199]="&Ccedil;",s[200]="&Egrave;",s[201]="&Eacute;",s[202]="&Ecirc;",s[203]="&Euml;",s[204]="&Igrave;",s[205]="&Iacute;",s[206]="&Icirc;",s[207]="&Iuml;",s[208]="&ETH;",s[209]="&Ntilde;",s[210]="&Ograve;",s[211]="&Oacute;",s[212]="&Ocirc;",s[213]="&Otilde;",s[214]="&Ouml;",s[215]="&times;",s[216]="&Oslash;",s[217]="&Ugrave;",s[218]="&Uacute;",s[219]="&Ucirc;",s[220]="&Uuml;",s[221]="&Yacute;",s[222]="&THORN;",s[223]="&szlig;",s[224]="&agrave;",s[225]="&aacute;",s[226]="&acirc;",s[227]="&atilde;",s[228]="&auml;",s[229]="&aring;",s[230]="&aelig;",s[231]="&ccedil;",s[232]="&egrave;",s[233]="&eacute;",s[234]="&ecirc;",s[235]="&euml;",s[236]="&igrave;",s[237]="&iacute;",s[238]="&icirc;",s[239]="&iuml;",s[240]="&eth;",s[241]="&ntilde;",s[242]="&ograve;",s[243]="&oacute;",s[244]="&ocirc;",s[245]="&otilde;",s[246]="&ouml;",s[247]="&divide;",s[248]="&oslash;",s[249]="&ugrave;",s[250]="&uacute;",s[251]="&ucirc;",s[252]="&uuml;",s[253]="&yacute;",s[254]="&thorn;",s[255]="&yuml;",s[8364]="&euro;"),"ENT_NOQUOTES"!==n&&(s[34]="&quot;"),"ENT_QUOTES"===n&&(s[39]="&#39;"),s[60]="&lt;",s[62]="&gt;";for(r in s)s.hasOwnProperty(r)&&(i[String.fromCharCode(r)]=s[r]);return i}jSmart.prototype={constructor:jSmart,tree:[],scripts:{},modifiers:{},defaultModifiers:[],defaultModifiersGlobal:[],globalAndDefaultModifiers:[],filters:{variable:[],post:[]},filtersGlobal:{pre:[],variable:[],post:[]},globalAndDefaultFilters:[],buildInFunctions:{},plugins:{},runTimePlugins:{},parse:function(e,t){var r;t||(t={}),t.rdelim?this.smarty.rdelim=t.rdelim:jSmart.prototype.right_delimiter?this.smarty.rdelim=jSmart.prototype.right_delimiter:this.smarty.rdelim="}",t.ldelim?this.smarty.ldelim=t.ldelim:jSmart.prototype.left_delimiter?this.smarty.ldelim=jSmart.prototype.left_delimiter:this.smarty.ldelim="{",void 0!==t.autoLiteral?this.autoLiteral=t.autoLiteral:void 0!==jSmart.prototype.auto_literal&&(this.autoLiteral=jSmart.prototype.auto_literal),void 0!==t.debugging?this.debugging=t.debugging:void 0!==jSmart.prototype.debugging&&(this.debugging=jSmart.prototype.debugging),void 0!==t.escapeHtml?this.escapeHtml=t.escapeHtml:void 0!==jSmart.prototype.escape_html&&(this.escapeHtml=jSmart.prototype.escape_html),e=String(e||""),jSmartParser.clear(),jSmartParser.rdelim=this.smarty.rdelim,jSmartParser.ldelim=this.smarty.ldelim,jSmartParser.getTemplate=this.getTemplate,jSmartParser.getConfig=this.getConfig,jSmartParser.autoLiteral=this.autoLiteral,jSmartParser.plugins=this.plugins,jSmartParser.preFilters=this.filtersGlobal.pre,r=jSmartParser.getParsed(e),this.tree=r.tree,this.runTimePlugins=r.runTimePlugins,this.blocks=r.blocks,this.outerBlocks=r.outerBlocks},fetch:function(e){var t;return"object"!=typeof e&&(e={}),e.smarty={},objectMerge(e.smarty,this.smarty),this.globalAndDefaultModifiers=jSmart.prototype.defaultModifiersGlobal.concat(this.defaultModifiers),this.globalAndDefaultFilters=jSmart.prototype.filtersGlobal.variable.concat(this.filters.variable),jSmartProcessor.clear(),jSmartProcessor.plugins=this.plugins,jSmartProcessor.modifiers=this.modifiers,jSmartProcessor.defaultModifiers=this.defaultModifiers,jSmartProcessor.escapeHtml=this.escapeHtml,jSmartProcessor.variableFilters=this.globalAndDefaultFilters,jSmartProcessor.runTimePlugins=this.runTimePlugins,jSmartProcessor.blocks=this.blocks,jSmartProcessor.outerBlocks=this.outerBlocks,jSmartProcessor.debugging=this.debugging,t=jSmartProcessor.getProcessed(this.tree,e,this.smarty),objectMerge(this.smarty,t.smarty),this.applyFilters(jSmart.prototype.filtersGlobal.post.concat(this.filters.post),t.output)},applyFilters:function(e,t){for(var r=0;r<e.length;++r)t=e[r](t);return t},printR:function(e,t,r){t||(t="&nbsp;&nbsp;"),r||(r="");var a,n="";if(e instanceof Object){n="Object (\n";for(a in e)e.hasOwnProperty(a)&&(n+=t+t+"["+a+"] => "+this.printR(e[a],t+"&nbsp;&nbsp;",t+t));return n+=r+")\n"}if(e instanceof Array){n="Array (\n";for(a in e)e.hasOwnProperty(a)&&(n+=t+t+"["+a+"] => "+this.printR(e[a],t+"&nbsp;&nbsp;",t+t));return n+=r+")\n"}if(e instanceof Boolean){var s="false";return!0===s&&(s="true"),s+"\n"}return e+"\n"},registerPlugin:function(e,t,r){"modifier"===e?this.modifiers[t]=r:this.plugins[t]={type:e,process:r}},registerFilter:function(e,t){(this.tree?this.filters:jSmart.prototype.filtersGlobal)["output"===e?"post":e].push(t)},addDefaultModifier:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;++t){var r=jSmartParser.parseModifiers("|"+e[t],[0]);this.tree?this.defaultModifiers.push(r.tree[0]):this.defaultModifiersGlobal.push(r.tree[0])}},getTemplate:function(e){throw new Error("No template for "+e)},getFile:function(e){throw new Error("No file for "+e)},getJavascript:function(e){throw new Error("No Javascript for "+e)},getConfig:function(e){throw new Error("No config for "+e)}};var phpJs={ord:function(e){var t=e+"",r=t.charCodeAt(0);if(r>=55296&&r<=56319){var a=r;return 1===t.length?r:1024*(a-55296)+(t.charCodeAt(1)-56320)+65536}return r},bin2Hex:function(e){var t,r,a,n="";for(t=0,r=(e+="").length;t<r;t++)n+=(a=e.charCodeAt(t).toString(16)).length<2?"0"+a:a;return n},htmlEntityDecode:function(e,t){var r=e.toString(),a="",n="",s=getHtmlTranslationTable("HTML_ENTITIES",t);if(!1===s)return!1;delete s["&"],s["&"]="&amp;";for(n in s)a=s[n],r=r.split(a).join(n);return r=r.split("&#039;").join("'")},objectKeys:function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r},htmlEntities:function(e,t,r,a){var n,s=getHtmlTranslationTable("HTML_ENTITIES",t);if(e=null===e?"":e+"",!s)return!1;t&&"ENT_QUOTES"===t&&(s["'"]="&#039;"),a=null===a||!!a,n=Object.keys?Object.keys(s):phpJs.objectKeys(s);var i=new RegExp("&(?:#\\d+|#x[\\da-f]+|[a-zA-Z][\\da-z]*);|["+n.join("").replace(/([()[\]{}\-.*+?^$|/\\])/g,"\\$1")+"]","g");return e.replace(i,function(e){return e.length>1?a?s["&"]+e.substr(1):e:s[e]})},rawUrlDecode:function(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}))},rawUrlEncode:function(e){return e+="",encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},sprintf:function(){var e=arguments,t=0,r=function(e,t,r,a){r||(r=" ");var n=e.length>=t?"":new Array(1+t-e.length>>>0).join(r);return a?e+n:n+e},a=function(e,t,a,n,s,i){var o=n-e.length;return o>0&&(e=a||!s?r(e,n,i,a):[e.slice(0,t.length),r("",o,"0",!0),e.slice(t.length)].join("")),e},n=function(e,t,n,s,i,o,l){var p=e>>>0;return e=(n=n&&p&&{2:"0b",8:"0",16:"0x"}[t]||"")+r(p.toString(t),o||0,"0",!1),a(e,n,s,i,l)},s=function(e,t,r,n,s,i){return null!==n&&void 0!==n&&(e=e.slice(0,n)),a(e,"",t,r,s,i)};return e[t++].replace(/%%|%(\d+\$)?([-+'#0 ]*)(\*\d+\$|\*|\d+)?(?:\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(i,o,l,p,u,c){var g,h,f,d,m;if("%%"===i)return"%";var y,v=!1,b="",_=!1,x=!1,w=" ",j=l.length;for(y=0;y<j;y++)switch(l.charAt(y)){case" ":b=" ";break;case"+":b="+";break;case"-":v=!0;break;case"'":w=l.charAt(y+1);break;case"0":_=!0,w="0";break;case"#":x=!0}if((p=p?"*"===p?+e[t++]:"*"===p.charAt(0)?+e[p.slice(1,-1)]:+p:0)<0&&(p=-p,v=!0),!isFinite(p))throw new Error("sprintf: (minimum-)width must be finite");switch(u=u?"*"===u?+e[t++]:"*"===u.charAt(0)?+e[u.slice(1,-1)]:+u:"fFeE".indexOf(c)>-1?6:"d"===c?0:void 0,m=o?e[o.slice(0,-1)]:e[t++],c){case"s":return s(m+"",v,p,u,_,w);case"c":return s(String.fromCharCode(+m),v,p,u,_);case"b":return n(m,2,x,v,p,u,_);case"o":return n(m,8,x,v,p,u,_);case"x":return n(m,16,x,v,p,u,_);case"X":return n(m,16,x,v,p,u,_).toUpperCase();case"u":return n(m,10,x,v,p,u,_);case"i":case"d":return g=+m||0,m=(h=(g=Math.round(g-g%1))<0?"-":b)+r(String(Math.abs(g)),u,"0",!1),a(m,h,v,p,_);case"e":case"E":case"f":case"F":case"g":case"G":return h=(g=+m)<0?"-":b,f=["toExponential","toFixed","toPrecision"]["efg".indexOf(c.toLowerCase())],d=["toString","toUpperCase"]["eEfFgG".indexOf(c)%2],m=h+Math.abs(g)[f](u),phpJs.justify(m,h,v,p,_)[d]();default:return i}})},makeTimeStamp:function(e){if(!e)return Math.floor((new Date).getTime()/1e3);if(isNaN(e)){var t=phpJs.strtotime(e);return-1===t||!1===t?Math.floor((new Date).getTime()/1e3):t}return 14===(e+="").length&&-1!==e.search(/^[\d]+$/g)?phpJs.mktime(e.substr(8,2),e.substr(10,2),e.substr(12,2),e.substr(4,2),e.substr(6,2),e.substr(0,4)):Number(e)},mktime:function(){var e=new Date,t=arguments,r=0,a=["Hours","Minutes","Seconds","Month","Date","FullYear"];for(r=0;r<a.length;r++)if(void 0===t[r])t[r]=e["get"+a[r]](),t[r]+=3===r;else if(t[r]=parseInt(t[r],10),isNaN(t[r]))return!1;t[5]+=t[5]>=0?t[5]<=69?2e3:t[5]<=100?1900:0:0,e.setFullYear(t[5],t[3]-1,t[4]),e.setHours(t[0],t[1],t[2]);var n=e.getTime();return(n/1e3>>0)-(n<0)},_pad:function(e,t,r,a){r||(r=" ");var n=e.length>=t?"":new Array(1+t-e.length>>>0).join(r);return a?e+n:n+e},justify:function(e,t,r,a,n,s){var i=a-e.length;return i>0&&(e=r||!n?phpJs._pad(e,a,s,r):[e.slice(0,t.length),phpJs._pad("",i,"0",!0),e.slice(t.length)].join("")),e},strtotime:function(e,t){var r,a,n,s,i,o,l,p,u,c,g;if(!e)return!1;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();var h=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if((a=e.match(h))&&a[2]===a[4])if(a[1]>1901)switch(a[2]){case"-":return!(a[3]>12||a[5]>31)&&new Date(a[1],parseInt(a[3],10)-1,a[5],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3;case".":return!1;case"/":return!(a[3]>12||a[5]>31)&&new Date(a[1],parseInt(a[3],10)-1,a[5],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3}else if(a[5]>1901)switch(a[2]){case"-":case".":return!(a[3]>12||a[1]>31)&&new Date(a[5],parseInt(a[3],10)-1,a[1],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3;case"/":return!(a[1]>12||a[3]>31)&&new Date(a[5],parseInt(a[1],10)-1,a[3],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3}else switch(a[2]){case"-":return!(a[3]>12||a[5]>31||a[1]<70&&a[1]>38)&&(s=a[1]>=0&&a[1]<=38?+a[1]+2e3:a[1],new Date(s,parseInt(a[3],10)-1,a[5],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3);case".":return a[5]>=70?!(a[3]>12||a[1]>31)&&new Date(a[5],parseInt(a[3],10)-1,a[1],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3:a[5]<60&&!a[6]&&(!(a[1]>23||a[3]>59)&&(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),a[1]||0,a[3]||0,a[5]||0,a[9]||0)/1e3));case"/":return!(a[1]>12||a[3]>31||a[5]<70&&a[5]>38)&&(s=a[5]>=0&&a[5]<=38?+a[5]+2e3:a[5],new Date(s,parseInt(a[1],10)-1,a[3],a[6]||0,a[7]||0,a[8]||0,a[9]||0)/1e3);case":":return!(a[1]>23||a[3]>59||a[5]>59)&&(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),a[1]||0,a[3]||0,a[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(r=Date.parse(e)))return r/1e3|0;if(h=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),(a=e.match(h))&&("z"===a[4]?a[4]="Z":a[4].match(/^([+-][0-9]{2})$/)&&(a[4]=a[4]+":00"),!isNaN(r=Date.parse(a[1]+"T"+a[2]+a[4]))))return r/1e3|0;function f(e){var t,r,a,n,s=e.split(" "),p=s[0],u=s[1].substring(0,3),c=/\d+/.test(p),g="ago"===s[2],h=("last"===p?-1:1)*(g?-1:1);if(c&&(h*=parseInt(p,10)),l.hasOwnProperty(u)&&!s[1].match(/^mon(day|\.)?$/i))return i["set"+l[u]](i["get"+l[u]]()+h);if("wee"===u)return i.setDate(i.getDate()+7*h);if("next"===p||"last"===p)t=p,r=h,void 0!==(n=o[u])&&(0==(a=n-i.getDay())?a=7*r:a>0&&"last"===t?a-=7:a<0&&"next"===t&&(a+=7),i.setDate(i.getDate()+a));else if(!c)return!1;return!0}if(i=t?new Date(1e3*t):new Date,o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},l={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},c="([+-]?\\d+\\s"+(u="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+u+")(\\sago)?",!(a=e.match(new RegExp(c,"gi"))))return!1;for(g=0,p=a.length;g<p;g++)if(!f(a[g]))return!1;return i.getTime()/1e3},strftime:function(e,t){for(var r=function(e,t,r){for(void 0===r&&(r=10);parseInt(e,10)<r&&r>1;r/=10)e=t.toString()+e;return e.toString()},a={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %r %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%m/%d/%Y",X:"%r",alt_digits:"",ERA:"",ERA_YEAR:"",ERA_D_T_FMT:"",ERA_D_FMT:"",ERA_T_FMT:""},n={a:function(e){return a.a[e.getDay()]},A:function(e){return a.A[e.getDay()]},b:function(e){return a.b[e.getMonth()]},B:function(e){return a.B[e.getMonth()]},C:function(e){return r(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return r(parseInt(this.G(e)/100,10),0)},G:function(e){var t=e.getFullYear(),r=parseInt(n.V(e),10),a=parseInt(n.W(e),10);return a>r?t++:0===a&&r>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return r(0===t?12:t,0)},j:function(e){var t=e-new Date(e.getFullYear()+"/1/1 GMT");t+=6e4*e.getTimezoneOffset();var a=parseInt(t/6e4/60/24,10)+1;return r(a,0,100)},k:["getHours","0"],l:function(e){var t=e.getHours()%12;return r(0===t?12:t," ")},m:function(e){return r(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e){return a.p[e.getHours()>=12?1:0]},P:function(e){return a.P[e.getHours()>=12?1:0]},s:function(e){return Date.parse(e)/1e3},S:["getSeconds","0"],u:function(e){var t=e.getDay();return 0===t?7:t},U:function(e){var t=parseInt(n.j(e),10),a=6-e.getDay(),s=parseInt((t+a)/7,10);return r(s,0)},V:function(e){var t=parseInt(n.W(e),10),a=new Date(e.getFullYear()+"/1/1").getDay(),s=t+(a>4||a<=1?0:1);return 53===s&&new Date(e.getFullYear()+"/12/31").getDay()<4?s=1:0===s&&(s=n.V(new Date(e.getFullYear()-1+"/12/31"))),r(s,0)},w:"getDay",W:function(e){var t=parseInt(n.j(e),10),a=7-n.u(e),s=parseInt((t+a)/7,10);return r(s,0,10)},y:function(e){return r(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),a=r(parseInt(Math.abs(t/60),10),0),n=r(t%60,0);return(t>0?"-":"+")+a+n},Z:function(e){return e.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(e){return"%"}},s=void 0===t?new Date:t instanceof Date?new Date(t):new Date(1e3*t),i={c:"locale",D:"%m/%d/%y",F:"%y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};e.match(/%[cDFhnrRtTxX]/);)e=e.replace(/%([cDFhnrRtTxX])/g,function(e,t){var r=i[t];return"locale"===r?a[t]:r});return e.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,function(e,t){var a=n[t];return"string"==typeof a?s[a]():"function"==typeof a?a(s):"object"==typeof a&&"string"==typeof a[0]?r(s[a[0]](),a[1]):t})}};return jSmart.prototype.registerPlugin("modifier","capitalize",function(e,t,r){if("string"!=typeof e)return e;var a,n=new RegExp(t?"[^a-zA-Z_à-ü]+":"[^a-zA-Z0-9_à-ü]"),s=null,i="";for(r&&(e=e.toLowerCase()),s=e.match(n);s;s=e.match(n))(a=e.slice(0,s.index)).match(/\d/)?i+=a:i+=a.charAt(0).toUpperCase()+a.slice(1),i+=e.slice(s.index,s.index+s[0].length),e=e.slice(s.index+s[0].length);return e.match(/\d/)?i+e:i+e.charAt(0).toUpperCase()+e.slice(1)}),jSmart.prototype.registerPlugin("modifier","cat",function(e,t){return t=t||"",String(e)+t}),jSmart.prototype.registerPlugin("modifier","count",function(e){if(e instanceof Array)return e.length;if("object"==typeof e){if(Object.keys)return Object.keys(e).length;var t=0;for(var r in e)e.hasOwnProperty(r)&&++t;return t}return 0}),jSmart.prototype.registerPlugin("modifier","count_characters",function(e,t){return e=String(e),t?e.length:e.replace(/\s/g,"").length}),jSmart.prototype.registerPlugin("modifier","count_paragraphs",function(e){var t=String(e).match(/\n+/g);return t?t.length+1:1}),jSmart.prototype.registerPlugin("modifier","count_sentences",function(e){if("string"==typeof e){var t=e.match(/\w[.?!](\W|$)/g);if(t)return t.length}return 0}),jSmart.prototype.registerPlugin("modifier","count_words",function(e){if("string"==typeof e){var t=e.match(/\w+/g);if(t)return t.length}return 0}),jSmart.prototype.registerPlugin("modifier","date_format",function(e,t,r){return phpJs.strftime(t||"%b %e, %Y",phpJs.makeTimeStamp(e||r))}),jSmart.prototype.registerPlugin("modifier","debug_print_var",function(e){console.log(e+"--");var t="";return"object"==typeof module&&module&&"object"==typeof module.exports?t="node":"object"==typeof window&&window.document&&(t="browser"),""===t?"":"browser"===t?jSmart.prototype.printR(e):void console.log(e)}),jSmart.prototype.registerPlugin("modifier","defaultValue",function(e,t){return t=t||"",e&&"null"!==e&&void 0!==e?e:t}),jSmart.prototype.registerPlugin("modifier","escape",function(e,t,r,a){e=String(e),t=t||"html",r=r||"UTF-8",a=void 0===a||Boolean(a);var n,s="";switch(t){case"html":return a&&(e=e.replace(/&/g,"&amp;")),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;");case"htmlall":return phpJs.htmlEntities(e,3,r);case"url":return phpJs.rawUrlEncode(e);case"urlpathinfo":return phpJs.rawUrlEncode(e).replace(/%2F/g,"/");case"quotes":return e.replace(/(^|[^\\])'/g,"$1\\'");case"hex":for(s="",n=0;n<e.length;++n)s+="%"+phpJs.bin2Hex(e.substr(n,1)).toLowerCase();return s;case"hexentity":for(s="",n=0;n<e.length;++n)s+="&#x"+phpJs.bin2Hex(e.substr(n,1))+";";return s;case"decentity":for(s="",n=0;n<e.length;++n)s+="&#"+phpJs.ord(e.substr(n,1))+";";return s;case"mail":return e.replace(/@/g," [AT] ").replace(/[.]/g," [DOT] ");case"nonstd":for(s="",n=0;n<e.length;++n){var i=phpJs.ord(e.substr(n,1));s+=i>=126?"&#"+i+";":e.substr(n,1)}return s;case"javascript":return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/<\//g,"</")}return e}),jSmart.prototype.registerPlugin("modifier","from_charset",function(e){return e}),jSmart.prototype.registerPlugin("modifier","indent",function(e,t,r){e=String(e),t=t||4,r=r||" ";for(var a="";t--;)a+=r;var n=e.match(/\n+$/);return a+e.replace(/\n+$/,"").replace(/\n/g,"\n"+a)+(n?n[0]:"")}),jSmart.prototype.registerPlugin("modifier","lower",function(e){return String(e).toLowerCase()}),jSmart.prototype.registerPlugin("modifier","nl2br",function(e){return String(e).replace(/\n/g,"<br />")}),jSmart.prototype.registerPlugin("modifier","regex_replace",function(e,t,r){var a=t.match(/^ *\/(.*)\/(.*) *$/);return String(e).replace(new RegExp(a[1],"g"+(a.length>1?a[2]:"")),r)}),jSmart.prototype.registerPlugin("modifier","replace",function(e,t,r){if(!t)return e;e=String(e),t=String(t),r=String(r);var a="",n=-1;for(n=e.indexOf(t);n>=0;n=e.indexOf(t))a+=e.slice(0,n)+r,n+=t.length,e=e.slice(n);return a+e}),jSmart.prototype.registerPlugin("modifier","spacify",function(e,t){return t||(t=" "),String(e).replace(/(\n|.)(?!$)/g,"$1"+t)}),jSmart.prototype.registerPlugin("modifier","string_format",function(e,t){return phpJs.sprintf(t,e)}),jSmart.prototype.registerPlugin("modifier","strip",function(e,t){return t=t||" ",String(e).replace(/[\s]+/g,t)}),jSmart.prototype.registerPlugin("modifier","strip_tags",function(e,t,r){if(null===t&&(t=!0),r||!0!==t&&!1!==t&&(t+"").length>0&&(r=t,t=!0),r){var a=r.split(">");return a.splice(-1,1),e=String(e).replace(/<[^>]*?>/g,function(e,r,n){for(var s=e.match(/\w+/),i=0;i<a.length;i++){var o=(a[i]+">").match(/\w+/);if(s[0]===o[0])return e}return t?" ":""})}return String(e).replace(/<[^>]*?>/g,t?" ":"")}),jSmart.prototype.registerPlugin("modifier","to_charset",function(e){return e}),jSmart.prototype.registerPlugin("modifier","truncate",function(e,t,r,a,n){return e=String(e),t=t||80,r=null!=r?r:"...",e.length<=t?e:(t-=Math.min(t,r.length),n?e.slice(0,Math.floor(t/2))+r+e.slice(e.length-Math.floor(t/2)):(a||(e=e.slice(0,t+1).replace(/\s+?(\S+)?$/,"")),e.slice(0,t)+r))}),jSmart.prototype.registerPlugin("modifier","unescape",function(e,t,r){switch(e=String(e),t=t||"html",r=r||"UTF-8",t){case"html":return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#039;/g,"'").replace(/&quot;/g,'"');case"entity":case"htmlall":return phpJs.htmlEntityDecode(e,1);case"url":return phpJs.rawUrlDecode(e)}return e}),jSmart.prototype.registerPlugin("modifier","upper",function(e){return String(e).toUpperCase()}),jSmart.prototype.registerPlugin("modifier","wordwrap",function(e,t,r,a){t=t||80,r=r||"\n";for(var n=String(e).split("\n"),s=0;s<n.length;++s){for(var i=n[s],o="";i.length>t;){for(var l=0,p=i.slice(l).match(/\s+/);p&&l+p.index<=t;p=i.slice(l).match(/\s+/))l+=p.index+p[0].length;l=a?t-1:l||(p?p.index+p[0].length:i.length),o+=i.slice(0,l).replace(/\s+$/,""),l<i.length&&(o+=r),i=i.slice(l)}n[s]=o+i}return n.join("\n")}),jSmart.prototype.registerPlugin("function","__quoted",function(e,t){return e.join("")}),jSmart.prototype.registerPlugin("function","__array",function(e,t){var r=[];for(var a in e)e.hasOwnProperty(a)&&e[a]&&"function"!=typeof e[a]&&(r[a]=e[a]);return r}),jSmart.prototype.registerPlugin("function","__func",function(e,t){var r,a,n,s=[];for(r=0;r<e.length;++r)s.push(e[r]);return"__owner"in t&&e.name in t.__owner?(a=t.__owner,e.length?a[e.name].apply(a,e):a[e.name].apply(a)):jSmart.prototype.modifiers.hasOwnProperty(e.name)?(a=jSmart.prototype.modifiers[e.name]).apply(a,s):(a=e.name,"object"==typeof module&&module&&"object"==typeof module.exports?n=global[a]:"object"==typeof window&&window.document?n=window[a]:global&&(n=global[a]),t[a]?t[a].apply(t[a],s):n?n.apply(n,s):"")}),jSmart.prototype.registerPlugin("function","counter",function(e,t){var r=e.__get("name","default");if(r in t.smarty.counter){var a=t.smarty.counter[r];"start"in e?a.value=parseInt(e.start,10):(a.value=parseInt(a.value,10),a.skip=parseInt(a.skip,10),"down"===a.direction?a.value-=a.skip:a.value+=a.skip),a.skip=e.__get("skip",a.skip),a.direction=e.__get("direction",a.direction),a.assign=e.__get("assign",a.assign),t.smarty.counter[r]=a}else t.smarty.counter[r]={value:parseInt(e.__get("start",1),10),skip:parseInt(e.__get("skip",1),10),direction:e.__get("direction","up"),assign:e.__get("assign",!1)};return t.smarty.counter[r].assign?(t[t.smarty.counter[r].assign]=t.smarty.counter[r].value,""):e.__get("print",!0)?t.smarty.counter[r].value:""}),jSmart.prototype.registerPlugin("function","cycle",function(e,t){var r=e.__get("name","default"),a=e.__get("reset",!1);r in t.smarty.cycle||(t.smarty.cycle[r]={arr:[""],delimiter:e.__get("delimiter",","),index:0},a=!0),e.__get("delimiter",!1)&&(t.smarty.cycle[r].delimiter=e.delimiter);var n=e.__get("values",!1);if(n){var s=[];if(n instanceof Object)for(var i in n)s.push(n[i]);else s=n.split(t.smarty.cycle[r].delimiter);s.length===t.smarty.cycle[r].arr.length&&s[0]===t.smarty.cycle[r].arr[0]||(t.smarty.cycle[r].arr=s,t.smarty.cycle[r].index=0,a=!0)}return e.__get("advance","true")&&(t.smarty.cycle[r].index+=1),(t.smarty.cycle[r].index>=t.smarty.cycle[r].arr.length||a)&&(t.smarty.cycle[r].index=0),e.__get("assign",!1)?(this.assignVar(e.assign,t.smarty.cycle[r].arr[t.smarty.cycle[r].index],t),""):e.__get("print",!0)?t.smarty.cycle[r].arr[t.smarty.cycle[r].index]:""}),jSmart.prototype.registerPlugin("function","eval",function(e,t){var r=e.var;return"assign"in e?(this.assignVar(e.assign,r,t),""):r}),jSmart.prototype.registerPlugin("function","debug",function(e,t){var r="";if("object"==typeof module&&module&&"object"==typeof module.exports?r="node":"object"==typeof window&&window.document&&(r="browser"),""===r)return"";if("browser"===r){window.jsmartDebug&&window.jsmartDebug.close(),window.jsmartDebug=window.open("","","width=680, height=600,resizable,scrollbars=yes");var a="",n="",s=0;for(var i in t.includedTemplates)a+="<tr class="+(++s%2?"odd":"even")+"><td>"+t.includedTemplates[i]+"</td></tr>";""!==a&&(a="<h2>included templates</h2><table>"+a+"</table><br>"),s=0;for(var o in t.assignedVars)n+="<tr class="+(++s%2?"odd":"even")+"><td>["+o+"]</td><td>"+jSmart.prototype.printR(t.assignedVars[o])+"</td></tr>";""!==n&&(n="<h2>assigned template variables</h2><table>"+n+"<table>");var l="<!DOCTYPE html><html><head><title>jSmart Debug Console</title><style type='text/css'>table {width: 100%;}td {vertical-align:top;}.odd td {background-color: #eee;}.even td {background-color: #dadada;}</style></head><body><h1>jSmart Debug Console</h1><br><pre>"+a+n+"</pre></body></html>";window.jsmartDebug.document.write(l)}else"undefined"!=typeof console&&(console.log("included templates:- "+JSON.stringify(a)),console.log("assigned template variables:- "+JSON.stringify(n)));return""}),jSmart.prototype.registerPlugin("function","fetch",function(e,t){var r=jSmart.prototype.getFile(e.__get("file",null,0));return"assign"in e?(this.assignVar(e.assign,r,t),""):r}),jSmart.prototype.registerPlugin("function","html_checkboxes",function(e,t){var r,a,n,s=e.__get("type","checkbox"),i=e.__get("name",s),o=i,l=e.__get("values",e.options),p=e.__get("options",[]),u="options"in e,c=e.__get("selected",!1),g=e.__get("separator",""),h=Boolean(e.__get("labels",!0)),f=Boolean(e.__get("label_ids",!1)),d=[],m=0,y="";if("checkbox"===s&&(i+="[]"),!u)for(r in e.output)p.push(e.output[r]);for(r in l)l.hasOwnProperty(r)&&(n=o+"_"+(a=u?r:l[r]),y=h?f?'<label for="'+n+'">':"<label>":"",y+='<input type="'+s+'" name="'+i+'" value="'+a+'" ',f&&(y+='id="'+n+'" '),c==(u?r:l[r])&&(y+='checked="checked" '),y+="/>"+p[u?r:m++],y+=h?"</label>":"",y+=g,d.push(y));return"assign"in e?(this.assignVar(e.assign,d,t),""):d.join("\n")}),jSmart.prototype.registerPlugin("function","html_image",function(e,t){var r,a=e.__get("file",null),n=e.__get("width",!1),s=e.__get("height",!1),i=e.__get("alt",""),o=e.__get("href",e.__get("link",!1)),l={file:1,width:1,height:1,alt:1,href:1,basedir:1,pathPrefix:1,link:1},p='<img src="'+e.__get("path_prefix","")+a+'" alt="'+i+'"'+(n?' width="'+n+'"':"")+(s?' height="'+s+'"':"");for(r in e)e.hasOwnProperty(r)&&"string"==typeof e[r]&&(r in l||(p+=" "+r+'="'+e[r]+'"'));return p+=" />",o?'<a href="'+o+'">'+p+"</a>":p}),jSmart.prototype.registerPlugin("function","html_options",function(e,t){var r,a=e.__get("values",e.options),n=e.__get("options",[]),s="options"in e;if(!s)for(r in e.output)n.push(e.output[r]);var i,o=e.__get("selected",!1),l=[],p="",u=0;if(o instanceof Array)for(i in o)o.hasOwnProperty(i)&&(o[i]=o[i]+"");else"boolean"!=typeof o&&(o=[o+""]);for(r in a)a.hasOwnProperty(r)&&(p='<option value="'+(s?r:a[r])+'"',o&&-1!==o.indexOf(s?r:a[r])&&(p+=' selected="selected"'),p+=">"+n[s?r:u++]+"</option>",l.push(p));var c=e.__get("name",!1);return(c?'<select name="'+c+'">\n'+l.join("\n")+"\n</select>":l.join("\n"))+"\n"}),jSmart.prototype.registerPlugin("function","html_radios",function(e,t){return e.type="radio",this.plugins.html_checkboxes.process(e,t)}),jSmart.prototype.registerPlugin("function","html_select_date",function(e,t){var r=e.__get("prefix","Date_"),a=new Date,n=Number(e.__get("start_year",a.getFullYear())),s=Number(e.__get("end_year",n)),i=e.__get("display_days",!0),o=e.__get("display_months",!0),l=e.__get("display_years",!0),p=e.__get("reverse_years",!1),u=["","January","February","March","April","May","June","July","August","September","October","November","December"],c='<select name="'+r+'Month">\n',g=0;if(n>s&&!p||n<s&&p){var h=s;s=n,n=h}if(o){for(g=1;g<u.length;++g)c+='<option value="'+g+'"'+(g===a.getMonth()+1?' selected="selected"':"")+">"+u[g]+"</option>\n";c+="</select>\n"}if(i){for(c+='<select name="'+r+'Day">\n',g=1;g<=31;++g)c+='<option value="'+g+'"'+(g===a.getDate()?' selected="selected"':"")+">"+g+"</option>\n";c+="</select>\n"}if(l){var f=n>s?-1:1;for(c+='<select name="'+r+'Year">\n',g=n;f>0?g<=s:g>=s;g+=f)c+='<option value="'+g+'"'+(g===a.getFullYear()?' selected="selected"':"")+">"+g+"</option>\n";c+="</select>\n"}return c}),jSmart.prototype.registerPlugin("function","html_table",function(e,t){var r,a=e.__get("rows",!1),n=e.__get("cols",!1),s=e.__get("inner","cols"),i=e.__get("caption",""),o=e.__get("table_attr",'border="1"'),l=e.__get("th_attr",!1),p=e.__get("tr_attr",!1),u=e.__get("td_attr",!1),c=e.__get("trailpad","&nbsp;"),g=e.__get("hdir","right"),h=e.__get("vdir","down"),f=[];if(e.loop instanceof Array)f=e.loop;else for(r in e.loop)e.loop.hasOwnProperty(r)&&f.push(e.loop[r]);n||(n=a?Math.ceil(f.length/a):3);var d=[];if(isNaN(n)){if("object"==typeof n)for(r in n)n.hasOwnProperty(r)&&d.push(n[r]);else d=n.split(/\s*,\s*/);n=d.length}a=a||Math.ceil(f.length/n),l&&"object"!=typeof l&&(l=[l]),p&&"object"!=typeof p&&(p=[p]),u&&"object"!=typeof u&&(u=[u]);for(var m,y="",v=0;v<a;++v){y+="<tr"+(p?" "+p[v%p.length]:"")+">\n";for(var b=0;b<n;++b)m="cols"===s?("down"===h?v:a-1-v)*n+("right"===g?b:n-1-b):("right"===g?b:n-1-b)*a+("down"===h?v:a-1-v),y+="<td"+(u?" "+u[b%u.length]:"")+">"+(m<f.length?f[m]:c)+"</td>\n";y+="</tr>\n"}var _="";if(d.length){_="\n<thead><tr>";for(var x=0;x<d.length;++x)_+="\n<th"+(l?" "+l[x%l.length]:"")+">"+d["right"===g?x:d.length-1-x]+"</th>";_+="\n</tr></thead>"}return"<table "+o+">"+(i?"\n<caption>"+i+"</caption>":"")+_+"\n<tbody>\n"+y+"</tbody>\n</table>\n"}),jSmart.prototype.registerPlugin("function","mailto",function(e,t){var r,a,n=e.__get("address",null),s=e.__get("encode","none"),i=e.__get("text",n),o=phpJs.rawUrlEncode(e.__get("cc","")).replace(/%40/g,"@").replace(/%2C/g,","),l=phpJs.rawUrlEncode(e.__get("bcc","")).replace(/%40/g,"@").replace(/%2C/g,","),p=phpJs.rawUrlEncode(e.__get("followupto","")).replace(/%40/g,"@").replace(/%2C/g,","),u=phpJs.rawUrlEncode(e.__get("subject","")),c=phpJs.rawUrlEncode(e.__get("newsgroups","")),g=e.__get("extra","");if(n+=o?"?cc="+o:"",n+=l?(o?"&":"?")+"bcc="+l:"",n+=u?(o||l?"&":"?")+"subject="+u:"",n+=c?(o||l||u?"&":"?")+"newsgroups="+c:"",r='<a href="mailto:'+(n+=p?(o||l||u||c?"&":"?")+"followupto="+p:"")+'" '+g+">"+i+"</a>","javascript"===s){r="document.write('"+r+"');";var h="";for(a=0;a<r.length;++a)h+="%"+phpJs.bin2Hex(r.substr(a,1));return'<script type="text/javascript">eval(unescape(\''+h+"'))<\/script>"}if("javascript_charcode"===s){var f=[];for(a=0;a<r.length;++a)f.push(phpJs.ord(r.substr(a,1)));return'<script type="text/javascript" language="javascript">\n\x3c!--\n{document.write(String.fromCharCode('+f.join(",")+"))}\n//--\x3e\n<\/script>\n"}if("hex"===s){if(n.match(/^.+\?.+$/))throw new Error("mailto: hex encoding does not work with extra attributes. Try javascript.");var d="";for(a=0;a<n.length;++a)n.substr(a,1).match(/\w/)?d+="%"+phpJs.bin2Hex(n.substr(a,1)):d+=n.substr(a,1);d=d.toLowerCase();var m="";for(a=0;a<i.length;++a)m+="&#x"+phpJs.bin2Hex(i.substr(a,1))+";";return'<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;'+d+'" '+g+">"+(m=m.toLowerCase())+"</a>"}return r}),jSmart.prototype.registerPlugin("function","math",function(params,data){var equation=params.__get("equation",null).replace(/pi\(\s*\)/g,"PI");equation=equation.replace(/ceil/g,"Math.ceil").replace(/abs/g,"Math.abs").replace(/cos/g,"Math.cos").replace(/exp/g,"Math.exp").replace(/floor/g,"Math.floor").replace(/log/g,"Math.log").replace(/max/g,"Math.max").replace(/min/g,"Math.min").replace(/PI/g,"Math.PI").replace(/pow/g,"Math.pow").replace(/rand/g,"Math.rand").replace(/round/g,"Math.round").replace(/sin/g,"Math.sin").replace(/sqrt/g,"Math.sqrt").replace(/srans/g,"Math.srans").replace(/tan/g,"Math.tan");var words=equation.match(/\w+/g),i,j,tmp,banned=["ceil","abs","cos","exp","floor","log10","log","max","min","pi","pow","rand","round","sin","sqrt","srans","tan"];for(i=0;i<words.length;i++)for(j=0;j<words.length-1;j++)(words[j]+"").length>(words[j+1]+"").length&&(tmp=words[j],words[j]=words[j+1],words[j+1]=tmp);for(i=0;i<words.length;i++)words[i]in params&&-1===banned.indexOf(words[i])&&(equation=equation.replace(words[i],params[words[i]]));var res=eval(equation);return"format"in params&&(res=Number(phpJs.sprintf(params.format,res))),"assign"in params?(this.assignVar(params.assign,res,data),""):res}),jSmart.prototype.registerPlugin("block","textformat",function(e,t,r,a){if(!t)return"";t=String(t);var n=e.__get("wrap",80),s=e.__get("wrap_char","\n"),i=e.__get("wrap_cut",!1),o=e.__get("indent_char"," "),l=e.__get("indent",0),p=new Array(l+1).join(o),u=e.__get("indent_first",0),c=new Array(u+1).join(o);"email"===e.__get("style","")&&(n=72);for(var g=t.split(/[\r\n]{2}/),h=0;h<g.length;++h){var f=g[h];f&&(f=f.replace(/^\s+|\s+$/,"").replace(/\s+/g," "),u>0&&(f=c+f),f=this.modifiers.wordwrap(f,n-l,s,i),l>0&&(f=f.replace(/^/gm,p)),g[h]=f)}var d=g.join(s+s);return"assign"in e?(this.assignVar(e.assign,d,r),""):d}),String.prototype.fetch=function(e){return new jSmart(this).fetch(e)},jSmart});